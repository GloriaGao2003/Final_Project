---
title: "Final Presentation"
format: gfm
execute: 
  warning: false
  message: false
  errors: false
jupyter: python3
---

### Read

```{python}
import pandas as pd
import statsmodels.api as sm
import seaborn as sns
import pandas as pd

performance=pd.read_csv('~/Desktop/Master/Module 2/Data Wrangling/Final Presentation/StudentsPerformance.csv')

performance.head()
performance.dtypes
```

### Clean Data
```{python}
df = performance.copy()

df.columns = df.columns.str.strip().str.lower()

df['test_prep'] = df['test preparation course'].map({'completed': 1, 'none': 0})

df["avg"] = df[["math score","reading score","writing score"]].mean(axis=1)

df.head()

```

### Visualize

1. Is the Test Preparation Course Effective compared to overall average socre.
```{python}
sns.boxplot(data=df, x="test_prep", y="avg")
```
The result shows that doing test preparation has effectively affect the overall test score, indicating it is nesscessary to prepare for the exam. 

2. Explore the relationship between gender and each subject's test score.
```{python}
import seaborn as sns
import matplotlib.pyplot as plt

scores = ["math score", "reading score", "writing score"]

for col in scores:
    plt.figure(figsize=(8,5))
    sns.histplot(data=df, x=col, hue="gender", kde=True, element="step")
    plt.title(f"{col} Distribution by Gender")
    plt.show()

```
Across all three subjects, males tend to perform slightly stronger in math, while females consistently outperform males in reading and writing, showing a clear gender-based performance pattern aligned with common academic trends.
Males score slightly higher in math, with a more concentrated distribution in the 60–90 range.Females outperform males significantly in reading, with higher concentration in the 70–100 range. Females show a strong advantage in writing, with a higher and more right-shifted score distribution.

3. Explore the relationship between parental level of education and students' overall average score.
```{python}
import numpy as np
order = ["some high school","high school","associate's degree","some college","bachelor's degree","master's degree"
]

df["parental level of education"] = pd.Categorical(
    df["parental level of education"],
    categories=order,
    ordered=True
)

sns.barplot(
    data=df,
    x="parental level of education",
    y="avg",
    estimator=np.mean,
    order=order  
)

plt.xticks(rotation=45)
plt.show()

```
Students with more highly educated parents tend to achieve higher average scores. Performance rises consistently from “some high school” to “master’s degree,” showing a clear positive relationship between parental education and student achievement.


### Feature Engineering
```{python}
df['is_female'] = df['gender'].map({'female': 1, 'male': 0})

df['lunch_bin'] = df['lunch'].map({'standard': 1, 'free/reduced': 0})

if 'race/ethnicity' in df.columns:
    df = pd.get_dummies(df, columns=['race/ethnicity'], drop_first=True, dtype=int)

if 'parental level of education' in df.columns:
    df = pd.get_dummies(df, columns=['parental level of education'], drop_first=True, dtype=int)

bool_cols = df.select_dtypes(include=['bool']).columns
df[bool_cols] = df[bool_cols].astype(int)

df.head()
```

### Model

Create any type of model to answer a question of your choice. 

Question to answer: Which factors most significantly affect students’ overall academic performance?

```{python}
from sklearn.linear_model import LinearRegression
import statsmodels.formula.api as smf

df = df.rename(columns=lambda x: x.replace("'", "").replace("/", "_").replace(" ", "_"))

X = df.drop(["math_score","reading_score","writing_score","avg","gender","lunch","test_preparation_course"], axis=1)

features = X.columns
formula = "avg ~ " + " + ".join(features)

model = smf.ols(formula=formula, data=df).fit()
model.summary()
```
Students' socioeconomic resources and academic support systems strongly influence their overall academic performance. Among all factors, lunch status has the largest effect, with students receiving standard lunch scoring about 8.8 points higher than those on free or reduced lunch. This most likely speaks to broader socioeconomic advantages: students with standard lunch may come from households with greater financial stability, better nutrition, and more consistent learning environments, which all support academic success.

Another critical aspect is test preparation; on average, the performance for students who completed their test prep stood at approximately 7.6 points higher. It could follow, then, that structured academic support, access to study materials, and guided practice meaningfully improve performance across subjects.

Parental education level indicates a clear upward gradient: students whose parents hold a master's degree perform about 8.6 points higher, and bachelor's degree parents add 7.0 points. Generally speaking, the higher the parental education, the higher the academic encouragement, familiarity with school expectations, and access to educational resources at home.

The influence of gender is smaller but still meaningful, with girls outperforming boys by about 3.7 points, as in the widely observed trends in both reading and writing achievement. Together, these findings highlight the fact that socioeconomic background (lunch status, parental education) and academic support (test preparation) significantly shape student performance while demographic factors such as gender add further variation.